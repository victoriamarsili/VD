<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style2.css" />
    <title>Header con Video Fullscreen y Story de Flourish</title>
  </head>


  <body>
    <header id="header">
      <!-- Audio que se reproduce una vez al cargar la página -->
      <audio id="introAudio" src="videos/misc276.mp3" preload="auto"></audio>

      <!-- Video de fondo -->
      <video id="backgroundVideo" autoplay muted loop preload="auto" playsinline>
          <source src="videos/plane_landing.mp4" type="video/mp4" />
          Tu navegador no soporta videos HTML5.
      </video>
      <div class="content">
        <h1>Click me</h1>
      </div>
      
  </header>

  <script>
     // Reproduce el audio cuando la página se carga
     window.addEventListener('load', function() {
      const audio = document.getElementById('introAudio');
      
      // Intentamos reproducir el audio y capturamos cualquier error
      audio.play().then(() => {
          console.log("El audio se está reproduciendo.");

          // Escuchar el evento 'ended' para asegurar que solo se reproduce una vez
          audio.addEventListener('ended', function() {
              console.log("El audio ha terminado de reproducirse.");
          });

      }).catch(error => {
          console.error("Error al intentar reproducir el audio automáticamente:", error);
          // Si el autoplay falla, intenta reproducir de nuevo en cuanto sea posible
          document.addEventListener('click', function retryPlay() {
              audio.play().then(() => {
                  console.log("El audio se está reproduciendo después de un clic.");
                  document.removeEventListener('click', retryPlay); // Quitar el listener después de un intento exitoso
              }).catch(err => {
                  console.error("Error al reproducir el audio después de un clic:", err);
              });
          });
      });
    });

    // Agrega funcionalidad al hacer clic en el texto superpuesto
    document.querySelector('.overlay-text').addEventListener('click', function() {
        alert('¡Has hecho clic en el texto!');
        // Puedes añadir más funcionalidad aquí, como redirigir a otra página o pausar el video
        // window.location.href = "https://www.ejemplo.com";
    });
</script>
    

<!-- Carrusel de imágenes -->
<div id="my-carousel" class="carousel">
  <div class="carousel-slide">
    <div class="image-intro">
      <img src="images/Desktop - 1.png" alt="Imagen de ejemplo">
    </div>
    <div class="image-intro">
      <img src="images/Desktop - 2.png" alt="Imagen de ejemplo">
    </div>
    <div class="image-intro">
      <img src="images/Desktop - 3.png" alt="Imagen de ejemplo">
    </div>
    <div class="image-intro">
      <img src="images/Desktop - 4.png" alt="Imagen de ejemplo">
    </div>
  </div>
</div>
      
      
      <div id="image-transition" style="height: 600px; overflow: hidden">
        <img src="images/Group1.png" alt="Imagen transición" class="transition-image" />
      </div>
    
      <!-- Contenedor de la story de flourish (scrolly)-->
      <div id="my-wrapper" style="margin-top: 100px;">
        <div
          class="flourish-embed cards"
          data-src="story/2446957"
          data-url="https://flo.uri.sh/story/2446957/embed"
          data-height="100vh"
        >
          <script src="https://public.flourish.studio/resources/embed.js"></script>
        </div>
        <p>
          Desde 2016, con la llegada de las low-cost la cantidad de pasajeros creció constantemente hasta el 2020 producto de la Pandemia COVID-19
          <a href="#story/2446957/slide-1"></a>
        </p>
        <p>En el 2023 se llegó al record de pasajeros en la historia argentina con 6.200.000. <a href="#story/2446957/slide-1"></a>
        </p>
        <p>
          Las low-cost convitieron viajar en algo accesible. Año tras año las siguientes low-cost avanzan sobre el territorio de las aerolíneas tradicionales.
          <a href="#story/2446957/slide-2"></a>
        </p>
        <p>
          En tan sólo 6 años, las low-cost han podido acceder a la mitad del tráfico aéreo. 
          <a href="#story/2446957/slide-3"></a>
        </p>
      </div>

      
      <div class="contenedor">
        <table>
          <tr>
            <!-- Primera columna -->
            <td>
              <div>
                <h2 class="subtitulo">Por ellas, nos empezamos a conocer como país</h2>
                <p>Además de significar un aumento de pasajeros, propusieron nuevas rutas aéreas, nacionales como internacionales.</p>
              </div>
              <div id="image-transition2">
                <img width="800px" height="800px" src="images/Group57.png" alt="Imagen transición">
              </div>
            </td>
            <!-- Segunda columna -->
            <td>
              <h2 class="subtitulo">Título 2</h2>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam feugiat nulla sit amet quam placerat, a lobortis nisl malesuada.</p>
            </td>
          </tr>
        </table>
      </div>


    </div>           
      <!-- Texto de conclusión -->
      <section id="conclusion">
        <h2>¿Qué impactos tuvo en nuestras vidas?</h2>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed dictum lacinia tortor, nec tincidunt mi vehicula vitae. Integer sed lectus sem. Sed feugiat purus et neque mollis, at varius urna feugiat. Cras lobortis augue vitae dui lacinia aliquam.
        </p>
      </section>
      
      <!-- Video al final -->
      <section id="video-footer">
        <div class="video-container">
          <video id="video-footer-content" controls autoplay muted loop preload="auto" playsinline>
            <source src="videos/planes_world2.mp4" type="video/mp4" />
            Tu navegador no soporta videos HTML5.
          </video>
        </div>
      </section>
    </div>
    
    <!-- Flourish Scrolly -->
    <script
      src="https://cdn.flourish.rocks/flourish-scrolly-v3.1.0.min.js"
      type="text/javascript"
    ></script>
    <!-- ¡Inicializa la biblioteca para convertir tu historia en magia de desplazamiento! -->
    <script type="text/javascript">
      initFlourishScrolly();
    </script>

    <!-- Scripts -->
    <script
      src="https://cdn.flourish.rocks/flourish-scrolly-v3.1.0.min.js"
      type="text/javascript"
    ></script>
    <!-- ¡Inicializa la biblioteca para convertir tu historia en magia de desplazamiento! -->
    <div id="rectangle">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        var images = [
          "images/Group1.png",
          "images/Group2.png",
          "images/Group3.png",
          "images/Group4.png",
          "images/Group5.png",
          "images/Group6.png",
          "images/Group7.png",
          "images/Group8.png",
        ];

        var currentIndex = 0;
        var totalImages = images.length;
        var interval = 1500; // Intervalo en milisegundos

        function changeImage() {
          $("#image-transition img").attr("src", images[currentIndex]);
          currentIndex = (currentIndex + 1) % totalImages;
        }

        // Cambiar la imagen inicial al cargar la página
        changeImage();

        // Iniciar el intervalo para cambiar imágenes automáticamente
        setInterval(changeImage, interval);
      });
    </script>
  </div>
    <script>
      $(document).ready(function () {
        var images = [
          "images/Group58.png",
          "images/Group59.png",
          "images/Group60.png",
          "images/Group65.png",
          "images/Group62.png",
          "images/Group63.png",
          "images/Group64.png",
        ];

        var currentIndex = 0;
        var totalImages = images.length;
        var interval = 1500; // Intervalo en milisegundos

        function changeImage() {
          $("#image-transition2 img").attr("src", images[currentIndex]);
          currentIndex = (currentIndex + 1) % totalImages;
        }

        // Cambiar la imagen inicial al cargar la página
        changeImage();

        // Iniciar el intervalo para cambiar imágenes automáticamente
        setInterval(changeImage, interval);
      });
    </script>

<script>
  const slide = document.querySelector('.carousel-slide');

  let isDragging = false;
  let startPos = 0;
  let currentTranslate = 0;
  let prevTranslate = 0;
  let animationID;
  let currentIndex = 0;

  slide.addEventListener('mousedown', touchStart);
  slide.addEventListener('touchstart', touchStart);
  slide.addEventListener('mouseup', touchEnd);
  slide.addEventListener('mouseleave', touchEnd);
  slide.addEventListener('touchend', touchEnd);
  slide.addEventListener('mousemove', touchMove);
  slide.addEventListener('touchmove', touchMove);

  function touchStart(event) {
    if (event.type === 'touchstart') {
      startPos = event.touches[0].clientX;
    } else {
      startPos = event.clientX;
      event.preventDefault();
    }

    isDragging = true;
    animationID = requestAnimationFrame(animation);
  }

  function touchEnd() {
    isDragging = false;
    cancelAnimationFrame(animationID);

    const movedBy = currentTranslate - prevTranslate;
    if (movedBy < -100 && currentIndex < 3) currentIndex += 1;
    if (movedBy > 100 && currentIndex > 0) currentIndex -= 1;

    setPositionByIndex();
  }

  function touchMove(event) {
    if (isDragging) {
      const currentPosition = event.type === 'touchmove' ? event.touches[0].clientX : event.clientX;
      currentTranslate = prevTranslate + currentPosition - startPos;
    }
  }

  function animation() {
    setSliderPosition();
    if (isDragging) requestAnimationFrame(animation);
  }

  function setSliderPosition() {
    slide.style.transform = `translateX(${currentTranslate}px)`;
  }

  function setPositionByIndex() {
    currentTranslate = currentIndex * -slide.offsetWidth;
    prevTranslate = currentTranslate;
    setSliderPosition();
  }
</script>


  </body>
  <footer>
    <p><a href="#header">Volver para arriba</a></p>
  </footer>
</html>
